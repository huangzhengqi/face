webpackJsonp([6],{"1rsE":function(e,s){},"240+":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("vLgD");t("mw3O");var o={name:"fogot",data:function(){var e=this;return{active:0,activeName:"下一步",accountForm:{userName:""},phone:"",abbrPhone:"",msgCodeForm:{code:""},newPasswordForm:{password:"",checkPassword:""},newPasswordRules:{password:[{required:!0,message:"不能为空",trigger:"blur"}],checkPassword:[{validator:function(s,t,r){""===t?r(new Error("请再次输入密码")):t!==e.newPasswordForm.password?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]},accountRules:{userName:[{required:!0,message:"必须输入您的用户名",trigger:"blur"}]},msgCodeRules:{code:[{required:!0,message:"请输入收到的短信验证码",trigger:"blur"},{min:6,max:6,message:"验证码位数出错，长度为6位。",trigger:"blur"}]},msgBtn:!0,second:30,sendText:"发送验证码"}},methods:{next:function(){var e=this;0==this.active?this.$refs.accountForm.validate(function(s){if(!s)return e.$message.error("您还没输入用户名"),!0;var t;(t=e.accountForm.userName,Object(r.a)({url:"/merchant/admin/phone_find_by_username",method:"get",params:{username:t}})).then(function(s){e.phone=s.obj,e.abbrPhone=e.formatPhone(s.obj),e.active++}).catch(function(){})}):1==this.active?this.$refs.msgCodeForm.validate(function(s){if(!s)return e.$message.error("您还没输入验证码"),!1;var t,o;console.log(e.phone),(t=e.phone,o=e.msgCodeForm.code,Object(r.a)({url:"/merchant/admin/verify_code",method:"post",params:{phone:t,code:o}})).then(function(s){e.active++}).catch(function(){})}):2==this.active?(this.$refs.newPasswordForm.validate(function(s){if(!s)return e.$message.error("密码设置不符合规则"),!1;var t,o;(t=e.accountForm.userName,o=e.newPasswordForm.password,Object(r.a)({url:"/merchant/admin/reset_new_pwd",method:"post",params:{username:t,password:o}})).then(function(s){e.active++}).catch(function(){})}),this.activeName="前往登录"):3==this.active&&(console.log("go"),this.$router.push({path:"/login"}))},formatPhone:function(e){var s=e.split("");for(var t in s)t>2&&t<7&&(s[t]="*");var r=s.join("");return console.log(r),r},sendMsg:function(){var e,s=this;if((e=this.phone,Object(r.a)({url:"/merchant/admin/send_sms",method:"post",params:{phone:e}})).then(function(e){}).catch(function(){}),this.msgBtn){this.$message.success("发送短信至"+this.abbrPhone),this.msgBtn=!1,this.sendText=this.second+"s后重新发送";var t=window.setInterval(function(){s.second--,s.sendText=s.second+"s后重新发送",s.second<0&&(window.clearInterval(t),s.sendText="重新发送验证码",s.second=10,s.msgBtn=!0)},1e3)}},goindex:function(){console.log("go"),this.$router.push({path:"/login"})}}},a={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"login-container"},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"card_inside"},[t("el-steps",{attrs:{active:e.active,"align-center":""}},[t("el-step",{attrs:{title:"输入用户名",description:"请输入需要重置密码的用户名"}}),e._v(" "),t("el-step",{attrs:{title:"获取验证码",description:"获取并输入短信中的验证码"}}),e._v(" "),t("el-step",{attrs:{title:"设置新密码",description:"请务必牢记您的新密码"}}),e._v(" "),t("el-step",{attrs:{title:"设置完成",description:"点击“登录”前往登录页"}})],1)],1),e._v(" "),t("div",[0==e.active?t("div",[t("el-form",{ref:"accountForm",staticClass:"card_form",attrs:{model:e.accountForm,rules:e.accountRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入您需要重置密码的用户名"},model:{value:e.accountForm.userName,callback:function(s){e.$set(e.accountForm,"userName",s)},expression:"accountForm.userName"}})],1)],1)],1):e._e(),e._v(" "),1==e.active?t("div",[t("el-form",{ref:"msgCodeForm",staticClass:"card_form",attrs:{model:e.msgCodeForm,rules:e.msgCodeRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{attrs:{disabled:!0},model:{value:e.abbrPhone,callback:function(s){e.abbrPhone=s},expression:"abbrPhone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"验证码",prop:"code"}},[t("el-input",{attrs:{placeholder:"请输入收到的短信验证码"},model:{value:e.msgCodeForm.code,callback:function(s){e.$set(e.msgCodeForm,"code",s)},expression:"msgCodeForm.code"}},[t("el-button",{attrs:{slot:"append",disabled:!e.msgBtn},on:{click:e.sendMsg},slot:"append"},[e._v(e._s(e.sendText))])],1)],1)],1)],1):e._e(),e._v(" "),2==e.active?t("div",[t("el-form",{ref:"newPasswordForm",staticClass:"card_form",attrs:{model:e.newPasswordForm,rules:e.newPasswordRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"新密码",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"输入新密码"},model:{value:e.newPasswordForm.password,callback:function(s){e.$set(e.newPasswordForm,"password",s)},expression:"newPasswordForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"再次输入密码"},model:{value:e.newPasswordForm.checkPassword,callback:function(s){e.$set(e.newPasswordForm,"checkPassword",s)},expression:"newPasswordForm.checkPassword"}})],1)],1)],1):e._e(),e._v(" "),3==e.active?t("div",[t("h3",{staticStyle:{"text-align":"center",margin:"30px"}},[e._v("新密码设置成功，务必牢记")])]):e._e()]),e._v(" "),t("div",{staticClass:"card_btn_vbox"},[t("el-button",{staticStyle:{margin:"12px auto"},on:{click:e.next}},[e._v(e._s(e.activeName))])],1)])],1)},staticRenderFns:[]};var n=t("VU/8")(o,a,!1,function(e){t("sukt"),t("1rsE")},"data-v-d3fa5ee2",null);s.default=n.exports},sukt:function(e,s){}});
//# sourceMappingURL=6.8219b318115853a9e8b4.js.map