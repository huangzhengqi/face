webpackJsonp([8],{RPJg:function(t,e){},Z88X:function(t,e,o){"use strict";e.c=function(t,e,o,i){return Object(a.a)({url:"/member/coupon/list_re",method:"get",params:{pageSize:e,pageNumber:t,name:o.name,actStatus:o.actStatus,type:i}})},e.h=function(t,e,o){return Object(a.a)({url:"/member/coupon/update",method:"post",data:s.a.stringify({id:t,number:e,type:o})})},e.i=function(t,e,o){return Object(a.a)({url:"/member/coupon/update",method:"post",data:s.a.stringify({id:t,interrupt:e,actStatus:o})})},e.a=function(t){return Object(a.a)({url:"/member/coupon/logical_del",method:"post",data:s.a.stringify({ids:t})})},e.b=function(t){return Object(a.a)({url:"/member/coupon/find_one",method:"get",params:{id:t}})},e.g=function(t){return Object(a.a)({url:"/member/coupon/get_image",method:"get",params:{couponId:t}})},e.f=function(t){return Object(a.a)({url:"/member/coupon/analysis",method:"get",params:{name:t}})},e.d=function(t,e){return Object(a.a)({url:"/member/coupon/store_select",method:"get",params:{id:t,name:e}})},e.e=function(t){return Object(a.a)({url:"/member/coupon/cancel_after_verification_list",method:"get",params:t})};var a=o("vLgD"),i=o("mw3O"),s=o.n(i)},Zb4D:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("FG0f"),i=o("Z88X"),s=(o("vLgD"),{name:"couponDetail",data:function(){return{loading:!0,storeVisible:!1,couponDetail:{},storeSearchForm:{name:""},storeTable:[],urlId:"",mecName:"",logo:"",couponSyncPreview:!1}},filters:{remindFil:function(t){var e="";switch(parseInt(t)){case 1:e="过期前三天提醒";break;case 2:e="不提醒";break;default:e="未定义"}return e},couponSourceFil:function(t){var e="";switch(parseInt(t)){case 1:e="同步微信卡包";break;case 2:e="不同步";break;default:e="未定义"}return e},weekBlockFil:function(t){if(""==t||null==t||void 0===t)return"";if("1,2,3,4,5,6,7"==t)return"周一至周日";var e=t.split(","),o=[];for(var a in e)1==e[a]?o.push("周一 "):2==e[a]?o.push("周二 "):3==e[a]?o.push("周三 "):4==e[a]?o.push("周四 "):5==e[a]?o.push("周五 "):6==e[a]?o.push("周六 "):7==e[a]&&o.push("周日 ");return o.join("")},storeNumsCalcFil:function(t){if(""==t||null==t||void 0===t)return"";var e=t.split(","),o=0;for(var a in e)o++;return o}},computed:{},mounted:function(){this.urlId=void 0==this.$route.query.id?"":this.$route.query.id,this.mecName=sessionStorage.getItem("name")||"卡券预览",this.logo=sessionStorage.getItem("face")||"",this.getDetails()},methods:{getDetails:function(){var t=this,e=this,o=this.urlId;this.loading=!0,Object(i.b)(o).then(function(o){t.couponDetail=o.obj,setTimeout(function(){e.loading=!1},500)}).catch(function(t){})},storeOpen:function(){this.getStoreList(),this.storeVisible=!0},storeClose:function(){this.storeVisible=!1},storeSearchSubmit:function(){this.getStoreList()},storeSearchReset:function(){this.storeSearchForm={name:""},this.getStoreList()},getStoreList:function(){var t=this,e=this.urlId,o=this.storeSearchForm.name||"";Object(i.d)(e,o).then(function(e){var o=e.obj;t.storeTable=o}).catch(function(t){})},showCouponSyncPreview:function(){var t=this;this.loading=!0,setTimeout(function(){t.loading=!1,t.couponSyncPreview=!0},480)},goBack:function(){this.$router.go("-1")},wxColorFil:function(t){if(""==t||void 0==t||null==t)return"#63b359";var e=[{value:"Color010",hex:"#63b359"},{value:"Color020",hex:"#2c9f67"},{value:"Color030",hex:"#509fc9"},{value:"Color040",hex:"#5885cf"},{value:"Color050",hex:"#9062c0"},{value:"Color060",hex:"#d09a45"},{value:"Color070",hex:"#e4b138"},{value:"Color080",hex:"#ee903c"},{value:"Color081",hex:"#f08500"},{value:"Color082",hex:"#a9d92d"},{value:"Color090",hex:"#dd6549"},{value:"Color100",hex:"#cc463d"},{value:"Color101",hex:"#cf3e36"},{value:"Color102",hex:"#5E6671"}];for(var o in e)if(e[o].value==t)return e[o].hex},getImg:function(t){if(/^[0-9]*$/.test(t))return Object(a.a)(t);return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAFLklEQVR42u2dfVPyMAzA9/0/GyLKy4kep6Kgk0NRFJ2gPD13t+vTbqVbm6QdyV+Ks01/ZFmbplmyZ0GRhBEwaAbNwqAZNINmYdAMmoVBM+gG8v7+3rGWx8dHBl1POs4yn88ZdKWkadrxLQz6P/n5+emAyenpKYO2dRTj8fj397f03xeLhU0L9/f3xwsa4q6fzWZhepIkNMqDwQDUF11fXx8LaOEEShEMh0O0r7P9oD8+PpBHfn5+rnfX6/XaDPrl5UUf8/f3N5WnaifozWZDO9TpdEqoAB7oEBzlaDSiUiOhokw12dIfxTjzkISKMiHr3W6HrwY46OVyGWA4Al+NhNCcg2ItZoERg1YGc3t7Kz48OzsLk3VVOCV00NvttopmIKz1lXqUoM1jCIR1+0GHM+fzHtJCBd3r9WzwhWDXOL0n5NqTs1Y89Ww2ixX08/Oz+WJy1ghdJ4HoTeuvlVBqm0GT2zX0BiM46FrhZkLW0J36By08sovGVKzjA+2uMQlrcecdHWgq1hGDdllo4bOWO3p9fY0J9MPDg8ebA5o16LYLLOgsyxxbw7Rr0PA0LGixunVvEI213P7JyUlMoH2F0nFYg7YPC/rz8xOIAgQLueV+vx8T6Lu7O48tQ9s1nObgoLvdrt/GQVnLbW42m6NYsJCwPsaVIb6/FiuUyECLByDCnNe7XccXVFKUXi6XUbCOHjTootkja9BABxTowWCAFgnywjrWPUNF9cvLy8BZtwQ0QijZhbVyYvfr6ysm0GJlRbsX1XgDHkg9ypSwQOxavnixWEQPGuiWdGTdhiRHEqOuxVo/p9US0FRJGpbprKAqYR+twDm+aWPXyp9Wq1XcoKkciJl1Cw8LCRkOh0GxHo/HLTz+Ruus9xbHwrzsIIcCmpZ1qV0X1o2jA2p1A32c2+2WkDVmuSXseh1UpTP0fr1nboQFusppwq0bS7vzmAcRLug9VgWei4uL0l7SNMUfMlnxqm63C4dbON/QCoVRlmObTCaGWVeDXKH1eh1sYUf6AoNXV1eWNRmn0+nb29tutxP/JXz609NTlXMIsHZmKLVJ4Upmos0g4wANgRs6ThQx6FzMZS/jKrIbNGhZsixTkhdiKRgdGejWCINm0AyahUEzaAbNCBg0g2Zh0C0BXZTOtbm43+9DHEEFFcPoHKMoh0Hr6SalQRz7EI+vN2CJX70HniIDbQ7xMOjmt5W7Hg1ayEHrn6dpavZXuekEClrupnSEgYDO340xmUyiBJ33IbSf/0mu6FySvY8XX7mD1ov3l6oROujGD0Mc0KvVqkinU0TZVj8IGmJDxwq0UrzCxnU0PuzXDLTyygb5siLHw951kIE2m1J+2psQdH7UbjQa6e3kP6/Xa3cfjbFgybKscM0G1yE/62tVQW9mPvL3rZQjM5tboKCr0n/kWW3VCRE00OYu4gB90HUU34SLxspDta4ayuKlqF0hLF1PO48V9P7vZV+OGruAllGKGV5pOST5Ai8PQ1jQcIksLqDFxE720QcVOF7Q+jzBZQmuzOr0kl9m0Dc3N35nRw1Be5+rFVUc3EGXJtvpcY8q0LUO6ccH2n4CrnyugNaTz6tOXMUB2q/r0K+0jzZUuY7S+ah8nOLoLNpwRNsFdFWYyQzaPtM3JtDFu191B+oXtKXrKKbbEKECGtchryyUEIR9pLB0keKiW63znRGALr2Ra/VS9Z25gC7iq0DBLxrXka/NvCxqPbqO0nuLEjQLaqyDhUEzaAbNCBg0g2Zh0AyaQbMw6DbJP0zQqPbAWqsMAAAAAElFTkSuQmCC"},closeDialog:function(t){this.couponSyncPreview=!1},mousedown:function(t){this.selectElement=document.getElementById("wx-app");var e=this.selectElement;this.selectElement.style.cursor="move",this.isDowm=!0;var o=t.clientX-this.selectElement.offsetLeft,a=t.clientY-this.selectElement.offsetTop;document.onmousemove=function(i){var s=i||t;e.style.left=s.clientX-o+"px",e.style.top=s.clientY-a+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,e.style.cursor="default"}}}}),n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("卡券详情")]),t._v(" "),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",size:"small"},on:{click:t.goBack}},[t._v("返回上一页")])],1),t._v(" "),o("div",[o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("主要信息")])]),t._v(" "),o("div",{staticClass:"info-table"},[o("table",[o("tr",[o("td",[t._v("卡券名称")]),t._v(" "),o("td",[t._v(t._s(t.couponDetail.name||"——"))])]),t._v(" "),o("tr",[o("td",[t._v("卡券面值")]),t._v(" "),o("td",[t._v(t._s(t.couponDetail.money||"——")+"元")])]),t._v(" "),o("tr",[o("td",[t._v("卡券展示图")]),t._v(" "),o("td",[o("img",{staticClass:"bg-image",attrs:{src:t.getImg(t.couponDetail.photoId),alt:"卡券图片",width:"320",height:"240"}})])]),t._v(" "),o("tr",[o("td",[t._v("有效期")]),t._v(" "),o("td",[0==t.couponDetail.validType?[t._v("\n                  领取后"+t._s(t.couponDetail.claimedTime)+"天有效\n                ")]:t._e(),t._v(" "),1==t.couponDetail.validType?[t._v("\n                  "+t._s(t.couponDetail.validTimeStart)+"至"+t._s(t.couponDetail.validTimeEnd)+"\n                ")]:t._e()],2)]),t._v(" "),o("tr",[o("td",[t._v("发放总量")]),t._v(" "),o("td",[99999999==t.couponDetail.totalInventory?[t._v("\n                  不限制\n                ")]:[t._v("\n                  "+t._s(t.couponDetail.totalInventory)+"份\n                ")]],2)]),t._v(" "),o("tr",[o("td",[t._v("活动有效时间")]),t._v(" "),o("td",[t._v(t._s(t.couponDetail.actTimeStart)+"至"+t._s(t.couponDetail.actTimeEnd))])]),t._v(" "),o("tr",[o("td",[t._v("卡券说明")]),t._v(" "),o("td",[t._v(t._s(t.couponDetail.remark||"——"))])])])])]),t._v(" "),o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("规则配置")])]),t._v(" "),o("div",{staticClass:"info-table"},[o("table",[o("tr",[o("td",[t._v("最低消费")]),t._v(" "),o("td",[0==t.couponDetail.miniExpendLimit?[t._v("\n                  无门槛\n                ")]:[t._v("\n                  "+t._s(t.couponDetail.miniExpendLimit)+"元\n                ")]],2)]),t._v(" "),o("tr",[o("td",[t._v("使用时段")]),t._v(" "),o("td",["1,2,3,4,5,6,7"==t.couponDetail.useTimeWeek&&"00:00-23:59"==t.couponDetail.useTimeDay?[t._v("\n                  任意时段可用（周一至周日，00:00至23:59）\n                ")]:[o("p",[t._v(t._s(t._f("weekBlockFil")(t.couponDetail.useTimeWeek)))]),t._v(" "),o("p",[t._v(t._s(t.couponDetail.useTimeDay))])]],2)]),t._v(" "),o("tr",[o("td",[t._v("每位用户限领")]),t._v(" "),o("td",[99999999==t.couponDetail.claimUpperLimit?[t._v("\n                  不限制\n                ")]:[t._v("\n                  "+t._s(t.couponDetail.claimUpperLimit)+"张\n                ")]],2)]),t._v(" "),o("tr",[o("td",[t._v("使用门店")]),t._v(" "),o("td",{staticClass:"skyblue",on:{click:function(e){return t.storeOpen()}}},[t._v("\n                共"+t._s(t._f("storeNumsCalcFil")(t.couponDetail.storeIds))+"家门店\n              ")])])])])]),t._v(" "),o("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("其他配置")])]),t._v(" "),o("div",{staticClass:"info-table"},[o("table",[o("tr",[o("td",[t._v("过期提醒")]),t._v(" "),o("td",[t._v(t._s(t._f("remindFil")(t.couponDetail.remindType)))])]),t._v(" "),o("tr",[o("td",[t._v("同步发布至")]),t._v(" "),o("td",[t._v("\n                "+t._s(t._f("couponSourceFil")(t.couponDetail.couponSourceType))+"\n              ")])]),t._v(" "),1==t.couponDetail.couponSourceType?o("tr",[o("td",[t._v("卡券颜色")]),t._v(" "),o("td",[o("div",{staticClass:"el-color-picker el-color-picker--medium"},[o("div",{staticClass:"el-color-picker__trigger"},[o("span",{staticClass:"el-color-picker__color is-alpha"},[o("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:t.wxColorFil(t.couponDetail.wxColor)}})])])])])]):t._e(),t._v(" "),1==t.couponDetail.couponSourceType?o("tr",[o("td",[t._v("卡券标题")]),t._v(" "),o("td",[t._v("\n                "+t._s(t.couponDetail.title||"——")+"\n              ")])]):t._e(),t._v(" "),1==t.couponDetail.couponSourceType?o("tr",[o("td",[t._v("预览")]),t._v(" "),o("td",[o("el-button",{attrs:{type:"text",size:"small"},on:{click:t.showCouponSyncPreview}},[t._v("预览微信卡包")])],1)]):t._e()])])])],1)]),t._v(" "),o("el-dialog",{attrs:{title:"查看门店",visible:t.storeVisible,width:"30%","before-close":t.storeClose},on:{"update:visible":function(e){t.storeVisible=e}}},[o("div",[o("div",{staticClass:"search_header"},[o("div",{staticClass:"block"},[o("el-input",{attrs:{placeholder:"请输入门店名称"},on:{input:t.storeSearchSubmit},model:{value:t.storeSearchForm.name,callback:function(e){t.$set(t.storeSearchForm,"name",e)},expression:"storeSearchForm.name"}})],1),t._v(" "),o("div",{staticClass:"block",staticStyle:{float:"right"}},[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.storeSearchSubmit}},[t._v("查 询")]),t._v(" "),o("el-button",{attrs:{size:"small",icon:"el-icon-refresh-right"},on:{click:t.storeSearchReset}},[t._v("重 置")])],1),t._v(" "),o("el-divider",[t._v("门店列表")]),t._v(" "),o("div",{staticClass:"store-list"},[[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.storeTable}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"门店","show-overflow-tooltip":"",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"address","show-overflow-tooltip":"",label:"地址"}})],1)]],2)],1)])]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.couponSyncPreview,expression:"couponSyncPreview"}],staticClass:"sim-wxapp",attrs:{id:"wx-app"},on:{mousedown:t.mousedown}},[o("div",{staticClass:"sim-wxapp-header"},[o("span",{staticClass:"dialog-title"},[t._v("卡券预览")]),t._v(" "),o("i",{staticClass:"el-icon-close close-icon",staticStyle:{float:"right"},on:{click:t.closeDialog}})]),t._v(" "),o("div",{staticClass:"sim-body",style:{backgroundColor:t.wxColorFil(t.couponDetail.wxColor)}},[o("div",{staticClass:"roof-img"}),t._v(" "),o("img",{staticClass:"sim-logo",attrs:{src:t.getImg(t.logo),alt:""}}),t._v(" "),o("div",{staticClass:"sim-info-panel"},[o("div",{staticClass:"info-panel-content"},[o("span",{staticClass:"brand-name"},[t._v(t._s(t.mecName))]),t._v(" "),o("br"),t._v(" "),o("span",{staticClass:"brand-title"},[t._v(t._s(t.couponDetail.title))]),t._v(" "),o("br"),t._v(" "),o("el-button",{staticClass:"brand-button button-color",attrs:{size:"small"}},[t._v("立即使用")])],1),t._v(" "),o("div",{staticClass:"sim-body-time"},[o("div",{staticClass:"time-left"},[t._v("使用条件:")]),t._v(" "),0==t.couponDetail.miniExpendLimit?o("div",[[t._v("\n              无门槛\n            ")]],2):o("div",[[t._v("\n              满"+t._s(t.couponDetail.miniExpendLimit)+"元可用\n            ")]],2),t._v(" "),o("div",{staticClass:"time-left"},[t._v("有效期:")]),t._v(" "),o("div",{staticClass:"time-right"},[0==t.couponDetail.validType?o("span",[t._v("领取后"+t._s(t.couponDetail.claimedTime)+"天有效")]):t._e(),t._v(" "),1==t.couponDetail.validType?o("span",[t._v(t._s(t.couponDetail.validTimeStart)+" 至 "+t._s(t.couponDetail.validTimeEnd))]):t._e(),t._v(" "),o("div",{staticClass:"time-checkbox"},[t._v(t._s(t._f("weekBlockFil")(t.couponDetail.useTimeWeek)))]),t._v(" "),o("div",[t._v("\n              "+t._s(t.couponDetail.useTimeDay)+"\n            ")])])]),t._v(" "),t._m(0)])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wx-pa"},[e("span",{staticClass:"pa-title"},[this._v("公众号")]),this._v(" "),e("span",{staticClass:"el-icon-arrow-right close-icon",staticStyle:{float:"right"}})])}]};var l=o("VU/8")(s,n,!1,function(t){o("RPJg")},"data-v-05598aa4",null);e.default=l.exports}});
//# sourceMappingURL=8.ef48fd74bc07029e3782.js.map