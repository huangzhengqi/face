webpackJsonp([23],{a4iL:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),n=i("/vau"),c=i("OKQQ"),l=i("VuIw"),r=i("gyMJ"),o={data:function(){return{detail:{},open:!1,status:0,scenes:["线下","公众号/小程序","网站","APP"],curScene:0,majors:["企业","个体工商户"],curMajor:0,appStates:["已上线","未上线"],curAppState:0,openMenu:!1,photoTaker:0,representativeTypes:["法人","经办人"],curRepresentativeType:0,certificateTypes:["身份证","护照"],curCertificateType:0,isImagePreview:!1,imgUrl:"",merchantName:""}},methods:{onBack:function(){this.$router.push({name:c.k})},callActionSheet:function(t){this.open=!0,this.status=+t,1===this.status?this.curRepresentativeType=this.transferRepType(this.detail.representativeType):2===this.status&&(this.curCertificateType=this.transferCerType(this.detail.certificate))},onActionSheetClose:function(){this.open=!1},onActionSheetConfirm:function(){this.onActionSheetClose(),1===this.status?this.detail.representativeType=this.curRepresentativeType+1:2===this.status&&(this.detail.certificate=this.curCertificateType+1)},changeItem:function(t){1===this.status?this.curRepresentativeType=+t:2===this.status&&(this.curCertificateType=+t)},onActionMenuShow:function(t){2==+t?this.openMenu=!1:1==+t&&(this.openMenu=!0)},onTakePhoto:function(t){1==+t?this.$refs.fileCamera.click():2==+t&&this.$refs.file.click(),this.openMenu=!1},callTakePhoto:function(t){this.photoTaker=+t,this.openMenu=!0},onNext:function(){var t=["license","businessScope","startBusinessTime","endBusinessTime","businessLicensePhotoId","representativeType","representativeName","certificate","certificateNum","startCertificateTime","endCertificateTime"],e=!0;for(var i in this.detail)if(this.detail.hasOwnProperty(i)&&-1!==t.indexOf(i)&&!this.detail[i]){e=!1;break}e?(l.c.set(a()(this.detail)),this.$router.push({name:c.l})):this.$toast.error("有内容未填入")},onDateTimeChange:function(t,e,i){if(1==+t){var s=this.detail.startCertificateTime,a=this.detail.endCertificateTime;s&&a&&((s=this.getTimestamp(s))>=(a=this.getTimestamp(a))?(this.$toast.error("开始时间必须早于结束时间"),this.detail.startCertificateTime="",this.detail.endCertificateTime=""):(this.detail.startCertificateTime=this.getTime(this.detail.startCertificateTime),this.detail.endCertificateTime=this.getTime(this.detail.endCertificateTime)))}else if(2==+t){var n=this.detail.startBusinessTime,c=this.detail.endBusinessTime;n&&c&&((n=this.getTimestamp(n))>=(c=this.getTimestamp(c))?(this.$toast.error("开始时间必须早于结束时间"),this.detail.startBusinessTime="",this.detail.endBusinessTime=""):(this.detail.startBusinessTime=this.getTime(this.detail.startBusinessTime),this.detail.endBusinessTime=this.getTime(this.detail.endBusinessTime)))}},getTimestamp:function(t){return t?new Date(Date.parse(t)).getTime():0},getTime:function(t){if(t){var e=new Date(Date.parse(t)),i=e.getFullYear(),s=e.getMonth()+1;s<10&&(s="0"+s);var a=e.getDate();return a<10&&(a="0"+a),i+"-"+s+"-"+a}return""},onFileChange:function(t){var e=this;if(t.target.files){var i=t.target.files[0];i&&r.b.uploadImage(i).then(function(t){if(200===t.code){e.$toast.success("图片上传成功");var i=t.obj;1===e.photoTaker?e.$set(e.detail,"businessLicensePhotoId",i):2===e.photoTaker?e.$set(e.detail,"epresentativePhotoId",i):3===e.photoTaker&&e.$set(e.detail,"epresentativePhotoId2",i)}else e.$toast.error(t.msg)},function(t){e.$toast.error(t.msg)})}},initDetail:function(){this.detail=JSON.parse(l.c.get()),this.merchantName=JSON.parse(l.d.get()),this.merchantName=this.merchantName.merchantName},previewImage:function(t){t&&(this.imgUrl=t,this.isImagePreview=!0)},transferRepType:function(t){return 1!==t&&"1"!==t&&t?1:0},transferCerType:function(t){return 1!==t&&"1"!==t&&t?1:0}},filters:{loadImage:function(t){return t?n.b+"/fms/upload/resource/thumbnail/"+t:""},previewLoadImage:function(t){return t?n.b+"/fms/upload/resource/"+t:""},representativeTypeFilter:function(t){return 1===t?"法人":2===t?"经办人":""},certificateFilter:function(t){return 1===t?"身份证":2===t?"护照":""}},mounted:function(){this.id=JSON.parse(l.b.get()),this.id?this.initDetail():this.$toast.error("详情数据丢失")}},v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"client-info-detail frame-container box align-default short"},[i("div",{staticClass:"client-info-detail__padding"}),t._v(" "),i("div",{staticClass:"client-info-detail__nav box plr-30 align-hor-bet"},[i("div",{staticClass:"icon iconfont  iconreturn",on:{click:t.onBack}}),t._v(" "),i("div",{staticClass:"title"},[t._v("\n      "+t._s(t.merchantName)+"\n    ")]),t._v(" "),i("div",{staticClass:"pass"})]),t._v(" "),i("div",{staticClass:"client-info-detail__content box match-left-space"},[i("div",{staticClass:"match-width box align-default"},[i("div",{staticClass:"title"},[t._v("营业执照")]),t._v(" "),i("div",{staticClass:"item"},[t._m(0),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.license,expression:"detail.license"}],attrs:{placeholder:"请输入内容"},domProps:{value:t.detail.license},on:{input:function(e){e.target.composing||t.$set(t.detail,"license",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[t._m(1),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.businessScope,expression:"detail.businessScope"}],attrs:{placeholder:"请输入内容"},domProps:{value:t.detail.businessScope},on:{input:function(e){e.target.composing||t.$set(t.detail,"businessScope",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[t._m(2),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"input align-default"},[i("mu-date-input",{attrs:{label:"请输入开始时间",container:"bottomSheet","label-float":"","full-width":""},on:{change:function(e){t.onDateTimeChange(2,1,e)}},model:{value:t.detail.startBusinessTime,callback:function(e){t.$set(t.detail,"startBusinessTime",e)},expression:"detail.startBusinessTime"}}),t._v(" "),i("mu-date-input",{attrs:{label:"请输入结束时间",container:"bottomSheet","label-float":"","full-width":""},on:{change:function(e){t.onDateTimeChange(2,2,e)}},model:{value:t.detail.endBusinessTime,callback:function(e){t.$set(t.detail,"endBusinessTime",e)},expression:"detail.endBusinessTime"}})],1)])]),t._v(" "),i("div",{staticClass:"item"},[t._m(3),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"match-left-space",on:{click:function(e){t.callTakePhoto(1)}}},[t._v(" ")]),t._v(" "),i("div",{staticClass:"input align-right",staticStyle:{width:"auto"}},[t.detail.businessLicensePhotoId?i("img",{attrs:{src:t._f("loadImage")(t.detail.businessLicensePhotoId)},on:{click:function(e){t.previewImage(t.detail.businessLicensePhotoId)}}}):t._e(),t._v(" "),i("div",{staticClass:"icon iconfont iconenter ml-10",on:{click:function(e){t.callTakePhoto(1)}}})])])])]),t._v(" "),i("div",{staticClass:"match-width box align-default"},[i("div",{staticClass:"title"},[t._v("企业法人/经办人")]),t._v(" "),i("div",{staticClass:"item"},[t._m(4),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"input align-right",on:{click:function(e){t.callActionSheet(1)}}},[i("div",[t._v(t._s(t._f("representativeTypeFilter")(t.detail.representativeType)))]),t._v(" "),i("div",{staticClass:"icon iconfont iconenter ml-10"})])])]),t._v(" "),i("div",{staticClass:"item"},[t._m(5),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"input align-right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.representativeName,expression:"detail.representativeName"}],attrs:{placeholder:"请输入内容"},domProps:{value:t.detail.representativeName},on:{input:function(e){e.target.composing||t.$set(t.detail,"representativeName",e.target.value)}}})])])]),t._v(" "),i("div",{staticClass:"item"},[t._m(6),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"input align-right",on:{click:function(e){t.callActionSheet(2)}}},[i("div",[t._v(t._s(t._f("certificateFilter")(t.detail.certificate)))]),t._v(" "),i("div",{staticClass:"icon iconfont iconenter ml-10"})])])]),t._v(" "),i("div",{staticClass:"item"},[t._m(7),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.certificateNum,expression:"detail.certificateNum"}],attrs:{placeholder:"请输入内容"},domProps:{value:t.detail.certificateNum},on:{input:function(e){e.target.composing||t.$set(t.detail,"certificateNum",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item"},[t._m(8),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"input align-default"},[i("mu-date-input",{attrs:{label:"请输入开始时间",container:"bottomSheet","label-float":"","full-width":""},on:{change:function(e){t.onDateTimeChange(1,1,e)}},model:{value:t.detail.startCertificateTime,callback:function(e){t.$set(t.detail,"startCertificateTime",e)},expression:"detail.startCertificateTime"}}),t._v(" "),i("mu-date-input",{attrs:{label:"请输入结束时间",container:"bottomSheet","label-float":"","full-width":""},on:{change:function(e){t.onDateTimeChange(1,2,e)}},model:{value:t.detail.endCertificateTime,callback:function(e){t.$set(t.detail,"endCertificateTime",e)},expression:"detail.endCertificateTime"}})],1)])]),t._v(" "),i("div",{staticClass:"item"},[t._m(9),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"match-left-space",on:{click:function(e){t.callTakePhoto(2)}}},[t._v(" ")]),t._v(" "),i("div",{staticClass:"input align-right",staticStyle:{width:"auto"}},[t.detail.epresentativePhotoId?i("img",{attrs:{src:t._f("loadImage")(t.detail.epresentativePhotoId)},on:{click:function(e){t.previewImage(t.detail.epresentativePhotoId)}}}):t._e(),t._v(" "),i("div",{staticClass:"icon iconfont iconenter ml-10",on:{click:function(e){t.callTakePhoto(2)}}})])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.detail.certificate,expression:"detail.certificate===1"}],staticClass:"item"},[t._m(10),t._v(" "),i("div",{staticClass:"match-left-space align-right"},[i("div",{staticClass:"match-left-space",on:{click:function(e){t.callTakePhoto(3)}}},[t._v(" ")]),t._v(" "),i("div",{staticClass:"input align-right",staticStyle:{width:"auto"}},[t.detail.epresentativePhotoId2?i("img",{attrs:{src:t._f("loadImage")(t.detail.epresentativePhotoId2)},on:{click:function(e){t.previewImage(t.detail.epresentativePhotoId2)}}}):t._e(),t._v(" "),i("div",{staticClass:"icon iconfont iconenter ml-10",on:{click:function(e){t.callTakePhoto(3)}}})])])])]),t._v(" "),i("div",{staticClass:"match-width box align-center"},[i("div",{staticClass:"next box align-center",on:{click:t.onNext}},[t._v("\n        下一步\n      ")])]),t._v(" "),i("mu-bottom-sheet",{attrs:{open:t.open},on:{"update:open":function(e){t.open=e}}},[i("div",{staticClass:"action-sheet box align-default"},[i("div",{staticClass:"title box align-hor-bet plr-30"},[i("div",{on:{click:t.onActionSheetClose}},[t._v("\n            返回\n          ")]),t._v(" "),i("div",{staticClass:"confirm",on:{click:t.onActionSheetConfirm}},[t._v("\n            确定\n          ")])]),t._v(" "),t._l(t.representativeTypes,function(e,s){return 1==t.status?i("div",{key:s,staticClass:"match-width"},[i("div",{class:["item align-hor-bet plr-30 ptb-30",s==t.curRepresentativeType?"active":""],on:{click:function(e){t.changeItem(s)}}},[i("div",[t._v(t._s(e))]),t._v(" "),s==t.curRepresentativeType?i("div",{staticClass:"icon iconfont iconcheck"}):i("div",{staticClass:"pass"})])]):t._e()}),t._v(" "),t._l(t.certificateTypes,function(e,s){return 2==t.status?i("div",{key:s,staticClass:"match-width"},[i("div",{class:["item align-hor-bet plr-30 ptb-30",s==t.curCertificateType?"active":""],on:{click:function(e){t.changeItem(s)}}},[i("div",[t._v(t._s(e))]),t._v(" "),s==t.curCertificateType?i("div",{staticClass:"icon iconfont iconcheck"}):i("div",{staticClass:"pass"})])]):t._e()}),t._v(" "),i("div",{staticClass:"action-sheet__padding"})],2)]),t._v(" "),i("mu-bottom-sheet",{attrs:{open:t.openMenu},on:{"update:open":function(e){t.openMenu=e}}},[i("div",{staticClass:"action-sheet box align-default menu"},[i("div",{staticClass:"item align-center",on:{click:function(e){t.onTakePhoto(1)}}},[t._v("\n          拍照\n        ")]),t._v(" "),i("div",{staticClass:"item align-center",on:{click:function(e){t.onTakePhoto(2)}}},[t._v("\n          从手机相册选择\n        ")]),t._v(" "),i("div",{staticClass:"item align-center cancel",on:{click:function(e){t.onActionMenuShow(2)}}},[t._v("\n          取消\n        ")]),t._v(" "),i("div",{staticClass:"action-sheet__padding"})])]),t._v(" "),i("div",{staticClass:"file"},[i("input",{ref:"fileCamera",attrs:{type:"file",capture:"camera",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),i("div",{staticClass:"cover"})]),t._v(" "),i("div",{staticClass:"file"},[i("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),i("div",{staticClass:"cover"})])],1),t._v(" "),t.isImagePreview?i("div",{staticClass:"cover-x align-default",on:{click:function(e){t.isImagePreview=!1}}},[i("div",{staticClass:"match-left-space"}),t._v(" "),i("div",{staticClass:"image-preview"},[i("img",{staticClass:"match-parent",attrs:{src:t._f("previewLoadImage")(t.imgUrl)}})]),t._v(" "),i("div",{staticClass:"match-left-space"})]):t._e()])};v._withStripped=!0;var d={render:v,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("营业执照注册号\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("经营范围\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("营业期限\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("营业执照照片\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("证件持有人类型\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("证件持有人姓名\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("证件类型\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("证件号码\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("证件有效期\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("  ")]),this._v("证件扫描件\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("  ")]),this._v("证件扫描件\n        ")])}]},h=d;var u=i("VU/8")(o,h,!1,null,null,null);u.options.__file="src\\pages\\clientInfo\\clientInfoRecordNext.vue";e.default=u.exports}});
//# sourceMappingURL=23.557cca7caf2913145b0d.js.map