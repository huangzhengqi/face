webpackJsonp([24],{s7wQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mvHQ"),s=a.n(i),n=a("/vau"),l=a("OKQQ"),o=a("VuIw"),c=a("gyMJ"),r={data:function(){return{detail:{},rate:{},open:!1,status:0,scenes:["线下","公众号/小程序","网站","APP"],curScene:0,majors:["企业","个体工商户"],curMajor:0,appStates:["已上线","未上线"],curAppState:0,openMenu:!1,photoTaker:0,accountTypes:["对公账号"],curAccount:0,isImagePreview:!1,imgUrl:"",merchantName:""}},methods:{onBack:function(){this.$router.push({name:l.m})},callActionSheet:function(t){this.open=!0,this.status=+t,1==+t&&(this.curAccount=0)},onActionSheetClose:function(){this.open=!1},onActionSheetConfirm:function(){this.onActionSheetClose(),1===this.status&&(this.detail.accountType=this.accountTypes[this.curAccount])},changeItem:function(t){1===this.status&&(this.curAccount=+t)},onActionMenuShow:function(t){2==+t?this.openMenu=!1:1==+t&&(this.openMenu=!0)},onTakePhoto:function(t){1==+t?this.$refs.fileCamera.click():2==+t&&this.$refs.file.click(),this.openMenu=!1},callTakePhoto:function(t){this.openMenu=!0,this.photoTaker=+t},onNext:function(){var t=this,e=["wxRate","zfbRate","accountType","accountHolder","bankCity","bankName","bankOutlet","accountNumber","organizationCode","startOrganizationTime","endOrganizationTime","organizationPhotoId"],a=!0;for(var i in this.detail)if(this.detail.hasOwnProperty(i)&&-1!==e.indexOf(i)&&!this.detail[i]){a=!1;break}if(a){for(var n in this.detail)"string"==typeof this.detail[n]&&(this.detail[n]=this.detail[n].trim());this.detail.wxRate=this.rate.wxRate/100,this.detail.zfbRate=this.rate.zfbRate/100,this.detail.sxfZfbRate=this.rate.sxfZfbRate/100,this.detail.sxfWxRate=this.rate.sxfWxRate/100,this.detail.fyZfbRate=this.rate.fyZfbRate/100,this.detail.fyWxRate=this.rate.fyWxRate/100,this.detail.status=2,console.log("提交",this.detail),o.c.set(s()(this.detail)),c.b.submit(this.detail).then(function(e){200===e.code?(t.$toast.success("提交成功"),t.$router.push({name:l.j,query:{id:t.detail.id,isDirect:0}})):t.$toast.error(e.msg)},function(e){t.$toast.error(e.msg)})}else this.$toast.error("有内容未填入")},onDateTimeChange:function(t,e,a){if(1==+t){var i=this.detail.startOrganizationTime,s=this.detail.endOrganizationTime;i&&s&&((i=this.getTimestamp(i))>=(s=this.getTimestamp(s))?(this.$toast.error("开始时间必须早于结束时间"),this.detail.startOrganizationTime="",this.detail.endOrganizationTime=""):(this.detail.startOrganizationTime=this.getTime(this.detail.startOrganizationTime),this.detail.endOrganizationTime=this.getTime(this.detail.endOrganizationTime)))}},getTimestamp:function(t){return t?new Date(Date.parse(t)).getTime():0},getTime:function(t){if(t){var e=new Date(Date.parse(t)),a=e.getFullYear(),i=e.getMonth()+1;i<10&&(i="0"+i);var s=e.getDate();return s<10&&(s="0"+s),a+"-"+i+"-"+s}return""},initDetail:function(){this.detail=JSON.parse(o.c.get()),this.rate.wxRate=Number(this.detail.wxRate)?100*Number(this.detail.wxRate):0,this.rate.zfbRate=Number(this.detail.zfbRate)?100*Number(this.detail.zfbRate):0,this.rate.sxfZfbRate=Number(this.detail.sxfZfbRate)?100*Number(this.detail.sxfZfbRate):0,this.rate.sxfWxRate=Number(this.detail.sxfWxRate)?100*Number(this.detail.sxfWxRate):0,this.rate.fyZfbRate=Number(this.detail.fyZfbRate)?100*Number(this.detail.fyZfbRate):0,this.rate.fyWxRate=Number(this.detail.fyWxRate)?100*Number(this.detail.fyWxRate):0,this.merchantName=JSON.parse(o.d.get()),this.merchantName=this.merchantName.merchantName},onFileChange:function(t){var e=this;if(console.log("e",t),t.target.files){var a=t.target.files[0];a&&c.b.uploadImage(a).then(function(t){if(200===t.code){e.$toast.success("图片上传成功");var a=t.obj;1===e.photoTaker&&e.$set(e.detail,"organizationPhotoId",a)}else e.$toast.error(t.msg)},function(t){e.$toast.error(t.msg)})}},previewImage:function(t){t&&(this.imgUrl=t,this.isImagePreview=!0)}},filters:{loadImage:function(t){return t?n.b+"/fms/upload/resource/thumbnail/"+t:""},previewLoadImage:function(t){return t?n.b+"/fms/upload/resource/"+t:""}},mounted:function(){this.id=JSON.parse(o.b.get()),this.id?this.initDetail():this.$toast.error("详情数据丢失")}},u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"client-info-detail frame-container box align-default short"},[a("div",{staticClass:"client-info-detail__padding"}),t._v(" "),a("div",{staticClass:"client-info-detail__nav box plr-30 align-hor-bet"},[a("div",{staticClass:"icon iconfont  iconreturn",on:{click:t.onBack}}),t._v(" "),a("div",{staticClass:"title"},[t._v("\n      "+t._s(t.merchantName)+"\n    ")]),t._v(" "),a("div",{staticClass:"pass"})]),t._v(" "),a("div",{staticClass:"client-info-detail__content box match-left-space"},[a("div",{staticClass:"item"},[t._m(0),t._v(" "),a("div",{staticClass:"match-left-space align-right input-number"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate.wxRate,expression:"rate.wxRate"}],attrs:{type:"number"},domProps:{value:t.rate.wxRate},on:{input:function(e){e.target.composing||t.$set(t.rate,"wxRate",e.target.value)}}}),t._v("%\n      ")])]),t._v(" "),a("div",{staticClass:"item"},[t._m(1),t._v(" "),a("div",{staticClass:"match-left-space align-right input-number"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate.zfbRate,expression:"rate.zfbRate"}],attrs:{type:"number"},domProps:{value:t.rate.zfbRate},on:{input:function(e){e.target.composing||t.$set(t.rate,"zfbRate",e.target.value)}}}),t._v("%\n      ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"subtitle"},[t._v("\n        随行付支付宝费率\n      ")]),t._v(" "),a("div",{staticClass:"match-left-space align-right input-number"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate.sxfZfbRate,expression:"rate.sxfZfbRate"}],attrs:{type:"number"},domProps:{value:t.rate.sxfZfbRate},on:{input:function(e){e.target.composing||t.$set(t.rate,"sxfZfbRate",e.target.value)}}}),t._v("%\n      ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"subtitle"},[t._v("\n        随行付微信费率\n      ")]),t._v(" "),a("div",{staticClass:"match-left-space align-right input-number"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate.sxfWxRate,expression:"rate.sxfWxRate"}],attrs:{type:"number"},domProps:{value:t.rate.sxfWxRate},on:{input:function(e){e.target.composing||t.$set(t.rate,"sxfWxRate",e.target.value)}}}),t._v("%\n      ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"subtitle"},[t._v("\n        富友微信费率\n      ")]),t._v(" "),a("div",{staticClass:"match-left-space align-right input-number"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate.fyWxRate,expression:"rate.fyWxRate"}],attrs:{type:"number"},domProps:{value:t.rate.fyWxRate},on:{input:function(e){e.target.composing||t.$set(t.rate,"fyWxRate",e.target.value)}}}),t._v("%\n      ")])]),t._v(" "),a("div",{staticClass:"item"},[a("div",{staticClass:"subtitle"},[t._v("\n        富友支付宝费率\n      ")]),t._v(" "),a("div",{staticClass:"match-left-space align-right input-number"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.rate.fyZfbRate,expression:"rate.fyZfbRate"}],attrs:{type:"number"},domProps:{value:t.rate.fyZfbRate},on:{input:function(e){e.target.composing||t.$set(t.rate,"fyZfbRate",e.target.value)}}}),t._v("%\n      ")])]),t._v(" "),a("div",{staticClass:"match-width box align-default"},[a("div",{staticClass:"title"},[t._v("结算信息")]),t._v(" "),a("div",{staticClass:"item"},[t._m(2),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("div",{staticClass:"input align-right",on:{click:function(e){t.callActionSheet(1)}}},[a("div",[t._v(t._s(t.detail.accountType))]),t._v(" "),a("div",{staticClass:"icon iconfont iconenter ml-10"})])])]),t._v(" "),a("div",{staticClass:"item"},[t._m(3),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.accountHolder,expression:"detail.accountHolder"}],attrs:{placeholder:"请输入开户名称"},domProps:{value:t.detail.accountHolder},on:{input:function(e){e.target.composing||t.$set(t.detail,"accountHolder",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item"},[t._m(4),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.bankCity,expression:"detail.bankCity"}],attrs:{placeholder:"请输入开户行所在地(县/市)"},domProps:{value:t.detail.bankCity},on:{input:function(e){e.target.composing||t.$set(t.detail,"bankCity",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item"},[t._m(5),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.bankName,expression:"detail.bankName"}],attrs:{placeholder:"请输入开户银行"},domProps:{value:t.detail.bankName},on:{input:function(e){e.target.composing||t.$set(t.detail,"bankName",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item"},[t._m(6),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.bankOutlet,expression:"detail.bankOutlet"}],attrs:{placeholder:"开户支行名称"},domProps:{value:t.detail.bankOutlet},on:{input:function(e){e.target.composing||t.$set(t.detail,"bankOutlet",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item"},[t._m(7),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.accountNumber,expression:"detail.accountNumber"}],attrs:{placeholder:"请输入银行账号并仔细核对"},domProps:{value:t.detail.accountNumber},on:{input:function(e){e.target.composing||t.$set(t.detail,"accountNumber",e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"match-width box align-default"},[a("div",{staticClass:"title"},[t._v("组织机构信息")]),t._v(" "),a("div",{staticClass:"item"},[t._m(8),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.detail.organizationCode,expression:"detail.organizationCode"}],attrs:{placeholder:"请输入内容"},domProps:{value:t.detail.organizationCode},on:{input:function(e){e.target.composing||t.$set(t.detail,"organizationCode",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"item"},[t._m(9),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("div",{staticClass:"input align-default"},[a("mu-date-input",{attrs:{label:"请输入开始时间",container:"bottomSheet","label-float":"","full-width":""},on:{change:function(e){t.onDateTimeChange(1,1,e)}},model:{value:t.detail.startOrganizationTime,callback:function(e){t.$set(t.detail,"startOrganizationTime",e)},expression:"detail.startOrganizationTime"}}),t._v(" "),a("mu-date-input",{attrs:{label:"请输入结束时间",container:"bottomSheet","label-float":"","full-width":""},on:{change:function(e){t.onDateTimeChange(1,2,e)}},model:{value:t.detail.endOrganizationTime,callback:function(e){t.$set(t.detail,"endOrganizationTime",e)},expression:"detail.endOrganizationTime"}})],1)])]),t._v(" "),a("div",{staticClass:"item"},[t._m(10),t._v(" "),a("div",{staticClass:"match-left-space align-right"},[a("div",{staticClass:"match-left-space",on:{click:function(e){t.callTakePhoto(1)}}},[t._v(" ")]),t._v(" "),a("div",{staticClass:"input align-right",staticStyle:{width:"auto"}},[t.detail.organizationPhotoId?a("img",{attrs:{src:t._f("loadImage")(t.detail.organizationPhotoId)},on:{click:function(e){t.previewImage(t.detail.organizationPhotoId)}}}):t._e(),t._v(" "),a("div",{staticClass:"icon iconfont iconenter ml-10",on:{click:function(e){t.callTakePhoto(1)}}})])])])]),t._v(" "),a("div",{staticClass:"match-width box align-center"},[a("div",{staticClass:"next box align-center",on:{click:t.onNext}},[t._v("\n        提交\n      ")])]),t._v(" "),a("mu-bottom-sheet",{attrs:{open:t.open},on:{"update:open":function(e){t.open=e}}},[a("div",{staticClass:"action-sheet box align-default"},[a("div",{staticClass:"title box align-hor-bet plr-30"},[a("div",{on:{click:t.onActionSheetClose}},[t._v("\n            返回\n          ")]),t._v(" "),a("div",{staticClass:"confirm",on:{click:t.onActionSheetConfirm}},[t._v("\n            确定\n          ")])]),t._v(" "),t._l(t.accountTypes,function(e,i){return 1==t.status?a("div",{key:i,staticClass:"match-width"},[a("div",{class:["item align-hor-bet plr-30 ptb-30",i==t.curAccount?"active":""],on:{click:function(e){t.changeItem(i)}}},[a("div",[t._v(t._s(e))]),t._v(" "),i==t.curAccount?a("div",{staticClass:"icon iconfont iconcheck"}):a("div",{staticClass:"pass"})])]):t._e()}),t._v(" "),a("div",{staticClass:"action-sheet__padding"})],2)]),t._v(" "),a("mu-bottom-sheet",{attrs:{open:t.openMenu},on:{"update:open":function(e){t.openMenu=e}}},[a("div",{staticClass:"action-sheet box align-default menu"},[a("div",{staticClass:"item align-center",on:{click:function(e){t.onTakePhoto(1)}}},[t._v("\n          拍照\n        ")]),t._v(" "),a("div",{staticClass:"item align-center",on:{click:function(e){t.onTakePhoto(2)}}},[t._v("\n          从手机相册选择\n        ")]),t._v(" "),a("div",{staticClass:"item align-center cancel",on:{click:function(e){t.onActionMenuShow(2)}}},[t._v("\n          取消\n        ")]),t._v(" "),a("div",{staticClass:"action-sheet__padding"})])]),t._v(" "),a("div",{staticClass:"file"},[a("input",{ref:"fileCamera",attrs:{type:"file",capture:"camera",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),a("div",{staticClass:"cover"})]),t._v(" "),a("div",{staticClass:"file"},[a("input",{ref:"file",attrs:{type:"file",accept:"image/*"},on:{change:t.onFileChange}}),t._v(" "),a("div",{staticClass:"cover"})])],1),t._v(" "),t.isImagePreview?a("div",{staticClass:"cover-x align-default",on:{click:function(e){t.isImagePreview=!1}}},[a("div",{staticClass:"match-left-space"}),t._v(" "),a("div",{staticClass:"image-preview"},[a("img",{staticClass:"match-parent",attrs:{src:t._f("previewLoadImage")(t.imgUrl)}})]),t._v(" "),a("div",{staticClass:"match-left-space"})]):t._e()])};u._withStripped=!0;var d={render:u,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("微信费率\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("支付宝费率\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("账户类型\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("开户名称\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("开户银行城市\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("开户银行\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("开户支行\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("银行账号\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("组织机构代码\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("组织机构有效期\n        ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"subtitle"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("组织机构代码照片\n        ")])}]},v=d;var m=a("VU/8")(r,v,!1,null,null,null);m.options.__file="src\\pages\\clientInfo\\clientInfoRecordLast.vue";e.default=m.exports}});
//# sourceMappingURL=24.0265df5fdcf61cd8e508.js.map